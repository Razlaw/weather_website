(this.webpackJsonpweather_website=this.webpackJsonpweather_website||[]).push([[0],{32:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var r,n=a(24),o=a.n(n),c=(a(30),a(60)),i=a(7),s=a(3),u=a(4),l=a.n(u),d=(a(32),a(1)),h=a(61),p=(a(33),["title","titleId"]);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},f.apply(this,arguments)}function j(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function b(e,t){var a=e.title,n=e.titleId,o=j(e,p);return d.createElement("svg",f({id:"SVGRoot",width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},o),a?d.createElement("title",{id:n},a):null,r||(r=d.createElement("g",{stroke:"#000"},d.createElement("ellipse",{cx:5.6727,cy:5.7476,rx:3.0967,ry:3.1013,fill:"none",strokeLinecap:"square",strokeLinejoin:"round",strokeWidth:1.7101}),d.createElement("path",{d:"m9.2387 9.2405 3.7161 3.7215",fill:"none",strokeWidth:1.6549}),d.createElement("path",{d:"m9.2387 10.481-1.2387-2.481 2.4774 1.2405z",strokeLinejoin:"round",strokeWidth:.46851}))))}var y=d.forwardRef(b),m=(a.p,a(0));function O(e){var t=e.isScrolling,a=e.cityName,r=e.updateCityName,n=e.reloadWeather;return Object(m.jsx)("div",{className:"citySearchBar",children:Object(m.jsx)("form",{onSubmit:n,children:Object(m.jsxs)("div",{className:"formComponents",children:[Object(m.jsx)("input",{onKeyUp:function(e){"Enter"===e.key&&e.target.blur()},onChange:function(e){return r(e.target.value)},placeholder:""===a?"City":a,type:"text",id:"cityNameInput",autoFocus:!0}),Object(m.jsxs)("span",{children:[t,"test"]}),Object(m.jsx)("button",{type:"submit",children:Object(m.jsx)(y,{className:"magnifyingGlassIcon"})})]})})})}var x=a(5);a(35),a(36);function v(e){var t=e.time,a=e.active,r=e.sunrise,n=e.sunset,o="hourOfDayListItem";return o=a?o+" active":o,o=t<r||t>n?o+" night":o+" day",o=t===r||t===n?o+" twilight":o,Object(m.jsx)("li",{className:o,children:Object(m.jsxs)("span",{children:[t,":00"]})})}a(37),a(38);function w(e,t){for(var a="M 0,0 ",r=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=0;o<e.length;o++)r=Math.min(r,e[o][t]),n=Math.max(n,e[o][t]);r-=Math.max(1,.2*(n-r));for(var c=0;c<e.length;c++){a+="H "+(e[c][t]-r).toString()+" ",a+="v 1 "}return a+="L 0,"+e.length.toString()+" z"}function g(e){var t=e.dayID,a=e.plotID,r=(e.currentHour,e.weatherData),n=e.dataKey,o=a.toString()+t.toString();return Object(d.useEffect)((function(){var e=document.querySelector("."+o),t=Object(x.a)(e.children).reduce((function(e,t){var a=t.getBBox(),r=a.x,n=a.y,o=a.width,c=a.height;return(!e.xMin||r<e.xMin)&&(e.xMin=r),(!e.xMax||r+o>e.xMax)&&(e.xMax=r+o),(!e.yMin||n<e.yMin)&&(e.yMin=n),(!e.yMax||n+c>e.yMax)&&(e.yMax=n+c),e}),{}),a=t.xMin,r=t.xMax,n=t.yMin,c=t.yMax,i="".concat(a," ").concat(n," ").concat(Math.max(r-a,5)," ").concat(c-n);e.setAttribute("viewBox",i)}),[r]),Object(m.jsxs)("svg",{className:"svgPlot "+o,viewBox:"0 0 100 100",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsx)("defs",{children:Object(m.jsxs)("filter",{id:"inset-shadow",children:[Object(m.jsx)("feOffset",{dx:"0.1",dy:"0.1"}),Object(m.jsx)("feGaussianBlur",{stdDeviation:"0.4",result:"offset-blur"}),Object(m.jsx)("feComposite",{operator:"out",in:"SourceGraphic",in2:"offset-blur",result:"inverse"}),Object(m.jsx)("feFlood",{floodColor:"black",floodOpacity:".95",result:"color"}),Object(m.jsx)("feComposite",{operator:"in",in:"color",in2:"inverse",result:"shadow"}),Object(m.jsx)("feComposite",{operator:"over",in:"shadow",in2:"SourceGraphic"})]})}),Object(m.jsx)("path",{className:"shadowPath",fill:"#505160",strokeWidth:"0",vectorEffect:"non-scaling-stroke",d:w(r,n),filter:"url(#inset-shadow)"})]})}a(39);function D(e){var t=e.data,a=e.time,r=e.active,n=e.sunrise,o=e.sunset,c="dataListItem";return c=r?c+" active":c,c=a<n||a>o?c+" night":c+" day",c=a===n||a===o?c+" twilight":c,Object(m.jsx)("li",{className:c,children:Object(m.jsx)("span",{children:t})})}a.p;function N(e){var t=e.dayID,a=e.plotID,r=e.currentHour,n=e.weatherData,o=e.dataKey,c=e.plotKey,i=(e.unit,e.sunrise),s=e.sunset;e.decimalPrecision;return Object(m.jsxs)("div",{className:"plotAndDataContainer",children:[Object(m.jsx)("div",{className:"iconContainer",children:Object(m.jsx)("ul",{children:Object(x.a)(Array(24)).map((function(e,t){return Object(m.jsx)("span",{children:t})}))})}),Object(m.jsx)("div",{className:"dataContainer",children:Object(m.jsx)("ul",{children:Object(x.a)(Array(24)).map((function(e,t){return Object(m.jsx)(D,{data:n[t][o],time:t,active:r===t,sunrise:i,sunset:s},t)}))})}),Object(m.jsx)("div",{className:"plotContainer",children:Object(m.jsx)(g,{dayID:t,plotID:a,currentHour:r,weatherData:n,dataKey:c})})]})}function S(e){var t=e.dayId,a=e.weatherData,r=e.currentHour,n=e.hourOfSunrise,o=e.hourOfSunset,c=0===t?"Today":"Tomorrow",i=Object(d.useState)(0),u=Object(s.a)(i,2),l=u[0],h=u[1],p=Object(d.useRef)([0,0]),f=Object(d.useRef)([0,0]);function j(){var e=f.current[0]-p.current[0],t=f.current[1]-p.current[1],a=Math.abs(e)>Math.abs(t),r=e>50&&a;e<-50&&a&&h(l<1?l+1:0),r&&h(l>0?l-1:1)}return Object(m.jsx)("div",{className:"weatherForecastForADay",onTouchStart:function(e){return t=e,p.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY],void(f.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY]);var t},onTouchMove:function(e){return t=e,void(f.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY]);var t},onTouchEnd:function(){return j()},onMouseDown:function(e){return(t=e).preventDefault(),p.current=[t.clientX,t.clientY],void(f.current=[t.clientX,t.clientY]);var t},onMouseMove:function(e){return t=e,void(f.current=[t.clientX,t.clientY]);var t},onMouseUp:function(){return j()},children:Object(m.jsxs)("div",{className:"contentContainer",children:[Object(m.jsx)("div",{className:"dayDisplay",children:Object(m.jsx)("h1",{children:c})}),Object(m.jsxs)("div",{className:"forecast",children:[Object(m.jsx)("div",{className:"hoursOfDay",children:Object(m.jsx)("ul",{children:Object(x.a)(Array(24)).map((function(e,t){return Object(m.jsx)(v,{time:t,active:r===t,sunrise:n,sunset:o},t)}))})}),Object(m.jsx)("div",{className:"forecastPlot",children:Object(m.jsxs)("div",{className:"plotsContainer",children:[Object(m.jsxs)("div",{className:"temperatureAndWindPlotContainer",style:{transform:"rotateY(".concat(.25*l,"turn)")},children:[Object(m.jsx)(N,{dayID:t,plotID:"temperature",currentHour:r,weatherData:a,dataKey:"temperature",plotKey:"temperatureForPlot",unit:"\xb0C",sunrise:n,sunset:o}),Object(m.jsx)(N,{dayID:t,plotID:"wind",currentHour:r,weatherData:a,dataKey:"wind_speed",plotKey:"wind_speed",unit:"km/h",sunrise:n,sunset:o})]}),Object(m.jsxs)("div",{className:"rainPlotContainer",style:{transform:"rotateY(".concat(.25*(l-1),"turn)")},children:[Object(m.jsx)(N,{dayID:t,plotID:"probabilityOfPrecipitation",currentHour:r,weatherData:a,dataKey:"probabilityOfPrecipitation",plotKey:"probabilityOfPrecipitation",unit:"%",sunrise:n,sunset:o}),Object(m.jsx)(N,{dayID:t,plotID:"rain",currentHour:r,weatherData:a,dataKey:"rain_1h",plotKey:"rain_1h",unit:"mm",sunrise:n,sunset:o,decimalPrecision:1})]})]})})]})]})})}a(40);function M(e){e.cityName,e.weatherData;return Object(m.jsxs)("div",{className:"weatherForecastForAWeek",children:[Object(m.jsx)("div",{className:"contentContainer",children:Object(m.jsx)("h1",{children:"Forecast for a week"})}),Object(m.jsx)("div",{className:"footer",children:Object(m.jsxs)("span",{children:["The weather data displayed on this website is provided by",Object(m.jsx)("a",{href:"https://openweathermap.org",children:" OpenWeather (TM)"})," under the",Object(m.jsx)("a",{href:"https://creativecommons.org/licenses/by-sa/4.0/",children:" Creative Commons Attribution-ShareAlike 4.0 International licence (CC BY-SA 4.0)"}),". Data and database are open and licensed by ",Object(m.jsx)("a",{href:"https://opendatacommons.org/licenses/odbl/",children:" Open Data Commons Open Database License (ODbL)"}),"."]})})]})}var C=a(9),T=a.n(C);function I(e){var t=new Date(1e3*e),a=t.getUTCHours(),r=t.getUTCMinutes().toString();r=1===r.length?"0"+r:r;var n=t.getUTCSeconds().toString();return a+":"+r+":"+(n=1===n.length?"0"+n:n)}function _(){return window.innerHeight}var k=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,r,n,o,c,i,s,u,d,h,p,f,j,b,y,m,O,x,v,w,g,D,N,S,M,C,_,k,P,H,F,A,E,L,U,Y,K;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 3:return a=e.sent,r=a.data.coord.lat,n=a.data.coord.lon,o=a.data.dt,c=a.data.dt+a.data.timezone,e.next=10,T.a.get("https://api.openweathermap.org/data/2.5/onecall/timemachine?lat=".concat(r,"&lon=").concat(n,"&dt=").concat(o,"&units=metric&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 10:if(i=e.sent,s=48,u=[],d=new Date(1e3*c),h=d.getUTCHours(),!((p=i.data.hourly.length-1)<h)){e.next=25;break}return f=o-86400,e.next=20,T.a.get("https://api.openweathermap.org/data/2.5/onecall/timemachine?lat=".concat(r,"&lon=").concat(n,"&dt=").concat(f,"&units=metric&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 20:for(j=e.sent,b=h-p,console.assert(b<=j.data.hourly.length),y=j.data.hourly.length-b,m=y;m<j.data.hourly.length;m++)O="rain"in j.data.hourly[m]&&j.data.hourly[m].rain["1h"]>0||"snow"in j.data.hourly[m]&&j.data.hourly[m].snow["1h"]>0,u.push({temperature:Math.round(j.data.hourly[m].temp),wind_deg:j.data.hourly[m].wind_deg,wind_speed:Math.round(3.6*j.data.hourly[m].wind_speed),cloudiness:j.data.hourly[m].clouds,weather:j.data.hourly[m].weather,probabilityOfPrecipitation:O?100:0,rain_1h:"rain"in j.data.hourly[m]?j.data.hourly[m].rain["1h"].toFixed(1):0,snow_1h:"snow"in j.data.hourly[m]?j.data.hourly[m].snow["1h"].toFixed(1):0,timeUTC:I(j.data.hourly[m].dt),timeLocal:I(j.data.hourly[m].dt+a.data.timezone),dt:j.data.hourly[m].dt});case 25:for(x=u.length,v=p-(h-x);v<p;v++)w="rain"in i.data.hourly[v]&&i.data.hourly[v].rain["1h"]>0||"snow"in i.data.hourly[v]&&i.data.hourly[v].snow["1h"]>0,u.push({temperature:Math.round(i.data.hourly[v].temp),wind_deg:i.data.hourly[v].wind_deg,wind_speed:Math.round(3.6*i.data.hourly[v].wind_speed),cloudiness:i.data.hourly[v].clouds,weather:i.data.hourly[v].weather,probabilityOfPrecipitation:w?100:0,rain_1h:"rain"in i.data.hourly[v]?i.data.hourly[v].rain["1h"].toFixed(1):0,snow_1h:"snow"in i.data.hourly[v]?i.data.hourly[v].snow["1h"].toFixed(1):0,timeUTC:I(i.data.hourly[v].dt),timeLocal:I(i.data.hourly[v].dt+a.data.timezone),dt:i.data.hourly[v].dt});return"current,minutely,alerts",e.next=31,T.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(r,"&lon=").concat(n,"&units=metric&exclude=").concat("current,minutely,alerts","&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 31:for(g=e.sent,console.log("nextDaysForecast"),console.log(g),D=s-u.length,console.assert(D<=g.data.hourly.length),N=0;N<D;N++)u.push({temperature:Math.round(g.data.hourly[N].temp),wind_deg:g.data.hourly[N].wind_deg,wind_speed:Math.round(3.6*g.data.hourly[N].wind_speed),cloudiness:g.data.hourly[N].clouds,weather:g.data.hourly[N].weather,probabilityOfPrecipitation:"pop"in g.data.hourly[N]?(100*g.data.hourly[N].pop).toFixed():0,rain_1h:"rain"in g.data.hourly[N]?g.data.hourly[N].rain["1h"].toFixed(1):0,snow_1h:"snow"in g.data.hourly[N]?g.data.hourly[N].snow["1h"].toFixed(1):0,timeUTC:I(g.data.hourly[N].dt),timeLocal:I(g.data.hourly[N].dt+a.data.timezone),dt:g.data.hourly[N].dt});for(S=0,M=23,C=function(e){for(var t=[],a=S;a<=M;a++)t.push(u[a].temperature);for(var r=Math.min.apply(Math,t),n=t.map((function(e){return e-(r-1)})),o=0,c=S;c<=M;c++)u[c].temperatureForPlot=n[o],o++;S+=24,M+=24},_=0;_<2;_++)C();for(k={hourly:u},P=Date.now(),H=P+1e3*a.data.timezone,F=new Date(H),A=F.getUTCHours(),k.currentHour=A,k.hoursOfSunrise=[],k.hoursOfSunset=[],E=0;E<2;E++)L=new Date(1e3*(g.data.daily[E].sunrise+a.data.timezone)),U=L.getUTCHours(),Y=new Date(1e3*(g.data.daily[E].sunset+a.data.timezone)),K=Y.getUTCHours(),k.hoursOfSunrise.push(U),k.hoursOfSunset.push(K);return e.abrupt("return",Promise.resolve(k));case 53:return e.prev=53,e.t0=e.catch(0),console.log("Failed to fetch weather data within getWeatherData"),console.log(e.t0),e.abrupt("return",Promise.reject(Error(e.t0)));case 58:case"end":return e.stop()}}),e,null,[[0,53]])})));return function(t){return e.apply(this,arguments)}}();var P=function(){var e=function(){var e=Object(d.useState)(_()),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(d.useEffect)((function(){function e(){var e=_();e>a&&r(e)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}})),a}(),t=function(e){var t=Math.max(0,e-1),a=Object(d.useState)(0),r=Object(s.a)(a,2),n=r[0],o=r[1],c=Object(d.useRef)([0,0]),i=Object(d.useRef)(!1);return[n,o,function(e){e.preventDefault(),e.stopPropagation(),c.current=[e.targetTouches[0].clientX,e.targetTouches[0].clientY],i.current=!0},function(e){if(e.preventDefault(),e.stopPropagation(),i.current){var a=[e.targetTouches[0].clientX,e.targetTouches[0].clientY],r=a[0]-c.current[0],s=a[1]-c.current[1],u=Math.abs(r)<Math.abs(s),l=s>0&&u;s<0&&u&&(o(n<t?n+1:n),i.current=!1),l&&(o(n>0?n-1:n),i.current=!1)}}]}(3),a=Object(s.a)(t,4),r=a[0],n=(a[1],a[2]),o=a[3],c=Object(d.useRef)(null),u=Object(h.a)(["cityName"]),p=Object(s.a)(u,3),f=p[0],j=p[1],b=p[2],y=Object(d.useState)(f.cityName?f.cityName:""),x=Object(s.a)(y,2),v=x[0],w=x[1],g=Object(d.useState)(),D=Object(s.a)(g,2),N=D[0],C=D[1],T=Object(d.useRef)(!1),I=Object(d.useState)(0),P=Object(s.a)(I,2),H=P[0],F=P[1],A=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,E();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T.current=!0,e.next=4,k(v);case 4:t=e.sent,j("cityName",v,{path:"/",secure:!0,sameSite:"strict",maxAge:31536e3}),C(t),c.current.scrollTo(0,0),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Failed to fetch weather data"),console.log(e.t0),b("cityName",{path:"/",secure:!0,sameSite:"strict",maxAge:31536e3}),C();case 16:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){f.cityName&&E()}),[]),Object(m.jsx)("div",{className:"App",style:{minHeight:"".concat(e,"px")},children:Object(m.jsxs)("div",{className:"websiteContent",ref:c,children:[Object(m.jsx)(O,{isScrolling:H,cityName:v,updateCityName:w,reloadWeather:A}),void 0===N?Object(m.jsx)("div",{className:"noData",children:!1===T.current?Object(m.jsxs)("h1",{children:["Search for a city name.",Object(m.jsx)("br",{}),"Get the weather forecast."]}):Object(m.jsxs)("h1",{children:["Failed to get weather data.",Object(m.jsx)("br",{}),"Try another city."]})}):Object(m.jsxs)("div",{className:"sections",onTouchStart:function(e){return n(e)},onTouchMove:function(e){return o(e)},onScroll:function(e){return(t=e).preventDefault(),t.stopPropagation(),console.log("scroll e ",t),void F(H+1);var t},children:[Object(m.jsx)("div",{className:"container",style:{transform:"translateY(-".concat(100*r,"%)")},children:Object(m.jsx)(S,{dayId:0,weatherData:N.hourly.slice(0,24),currentHour:N.currentHour,hourOfSunrise:N.hoursOfSunrise[0],hourOfSunset:N.hoursOfSunset[0]})}),Object(m.jsx)("div",{className:"container",style:{transform:"translateY(".concat(100*(1-r),"%)")},children:Object(m.jsx)(S,{dayId:1,weatherData:N.hourly.slice(24,48),currentHour:N.currentHour,hourOfSunrise:N.hoursOfSunrise[1],hourOfSunset:N.hoursOfSunset[1]})}),Object(m.jsx)("div",{className:"container",style:{transform:"translateY(".concat(100*(2-r),"%)")},children:Object(m.jsx)(M,{cityName:f.cityName,weatherData:N})})]})]})})};o.a.render(Object(m.jsx)(c.a,{children:Object(m.jsx)(P,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.c70ca806.chunk.js.map