(this.webpackJsonpweather_website=this.webpackJsonpweather_website||[]).push([[0],{187:function(e,t,a){},188:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},327:function(e,t,a){},345:function(e,t,a){"use strict";a.r(t);var r,n=a(60),c=a.n(n),o=(a(185),a(351)),i=a(62),s=a(15),u=a(26),l=a.n(u),d=(a(187),a(0)),h=a(353),f=(a(188),["title","titleId"]);function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},p.apply(this,arguments)}function m(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function j(e,t){var a=e.title,n=e.titleId,c=m(e,f);return d.createElement("svg",p({id:"SVGRoot",width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},c),a?d.createElement("title",{id:n},a):null,r||(r=d.createElement("g",{stroke:"#000"},d.createElement("ellipse",{cx:5.6727,cy:5.7476,rx:3.0967,ry:3.1013,fill:"none",strokeLinecap:"square",strokeLinejoin:"round",strokeWidth:1.7101}),d.createElement("path",{d:"m9.2387 9.2405 3.7161 3.7215",fill:"none",strokeWidth:1.6549}),d.createElement("path",{d:"m9.2387 10.481-1.2387-2.481 2.4774 1.2405z",strokeLinejoin:"round",strokeWidth:.46851}))))}var b=d.forwardRef(j),y=(a.p,a(2));function O(e){var t=e.cityName,a=e.updateCityName,r=e.reloadWeather;return Object(y.jsx)("div",{className:"citySearchBar",children:Object(y.jsx)("form",{onSubmit:r,children:Object(y.jsxs)("div",{className:"formComponents",children:[Object(y.jsx)("input",{onKeyUp:function(e){"Enter"===e.key&&e.target.blur()},onChange:function(e){return a(e.target.value)},placeholder:""===t?"City":t,type:"text",id:"cityNameInput",autoFocus:!0}),Object(y.jsx)("button",{type:"submit",children:Object(y.jsx)(b,{className:"magnifyingGlassIcon"})})]})})})}var w=a(174);a(190),a(191);function v(e){var t=e.time,a=e.active,r=e.sunrise,n=e.sunset,c="hourOfDayListItem";return c=a?c+" active":c,c=t<r||t>n?c+" night":c+" day",c=t===r||t===n?c+" twilight":c,Object(y.jsxs)("li",{className:c,children:[t,":00"]})}a(192);var g=a(347),x=a(354),N=a(172),S=a(175),T=a(169),D=a(171);function C(e){var t=e.currentHour,a=e.weatherData,r=e.dataKey,n=e.plotKey,c=e.unit,o=e.decimalPrecision,i=void 0===o?0:o;return Object(y.jsx)(g.a,{width:"100%",height:"100%",children:Object(y.jsxs)(x.a,{layout:"vertical",width:"100%",height:"100%",data:a,margin:{top:20,left:20,right:20,bottom:0},children:[Object(y.jsx)(N.a,{type:"number",hide:!0,domain:[0,"dataMax + 1"]}),Object(y.jsxs)(S.a,{dataKey:r,barSize:18,background:{fill:"rgb(255,255,255)"},isAnimationActive:!1,children:[Object(y.jsx)(T.a,{dataKey:n,position:"right",formatter:function(e){return e.toFixed(i)+c}}),a.map((function(e,a){return Object(y.jsx)(D.a,{className:a===t?"barCell active":"barCell",fill:a===t?"#82ca9d":"rgb(136,132,216)",height:18,stroke:"#000",strokeWidth:0,radius:[0,5,5,0]},"cell-".concat(a))}))]})]})})}function _(e){var t=e.dayId,a=e.weatherData,r=e.currentHour,n=e.hourOfSunrise,c=e.hourOfSunset,o=0===t?"Today":"Tomorrow",i=Object(d.useState)(0),u=Object(s.a)(i,2),l=u[0],h=u[1],f=Object(d.useRef)([0,0]),p=Object(d.useRef)([0,0]);function m(){var e=p.current[0]-f.current[0],t=p.current[1]-f.current[1],a=Math.abs(e)>Math.abs(t),r=e>50&&a;e<-50&&a&&h(l<2?l+1:0),r&&h(l>0?l-1:2)}return Object(y.jsx)("div",{className:"weatherForecastForADay",onTouchStart:function(e){return t=e,f.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY],void(p.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY]);var t},onTouchMove:function(e){return t=e,void(p.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY]);var t},onTouchEnd:function(){return m()},onMouseDown:function(e){return(t=e).preventDefault(),f.current=[t.clientX,t.clientY],void(p.current=[t.clientX,t.clientY]);var t},onMouseMove:function(e){return t=e,void(p.current=[t.clientX,t.clientY]);var t},onMouseUp:function(){return m()},children:Object(y.jsxs)("div",{className:"contentContainer",children:[Object(y.jsx)("div",{className:"dayDisplay",children:Object(y.jsx)("h1",{children:o})}),Object(y.jsxs)("div",{className:"forecast",children:[Object(y.jsx)("div",{className:"hoursOfDay",children:Object(y.jsx)("ul",{children:Object(w.a)(Array(24)).map((function(e,t){return Object(y.jsx)(v,{time:t,active:r===t,sunrise:n,sunset:c},t)}))})}),Object(y.jsx)("div",{className:"forecastPlot",children:Object(y.jsxs)("div",{className:"plotContainer",children:[Object(y.jsx)("div",{className:"temperaturePlot",style:{transform:"rotateY(".concat(.25*l,"turn)")},children:Object(y.jsx)(C,{currentHour:r,weatherData:a,dataKey:"temperatureForPlot",plotKey:"temperature",unit:"\xb0C"})}),Object(y.jsx)("div",{className:"windPlot",style:{transform:"rotateY(".concat(.25*(l-2),"turn)")},children:Object(y.jsx)(C,{currentHour:r,weatherData:a,dataKey:"wind_speed",plotKey:"wind_speed",unit:"km/h"})}),Object(y.jsx)("div",{className:"rainPlot",style:{transform:"rotateY(".concat(.25*(l-1),"turn)")},children:Object(y.jsx)(C,{currentHour:r,weatherData:a,dataKey:"rain_1h",plotKey:"rain_1h",unit:"mm",decimalPrecision:1})})]})})]})]})})}a(327);function k(e){e.cityName,e.weatherData;return Object(y.jsxs)("div",{className:"weatherForecastForAWeek",children:[Object(y.jsx)("div",{className:"contentContainer",children:Object(y.jsx)("h1",{children:"Forecast for a week"})}),Object(y.jsx)("div",{className:"footer",children:Object(y.jsxs)("span",{children:["The weather data displayed on this website is provided by",Object(y.jsx)("a",{href:"https://openweathermap.org",children:" OpenWeather (TM)"})," under the",Object(y.jsx)("a",{href:"https://creativecommons.org/licenses/by-sa/4.0/",children:" Creative Commons Attribution-ShareAlike 4.0 International licence (CC BY-SA 4.0)"}),". Data and database are open and licensed by ",Object(y.jsx)("a",{href:"https://opendatacommons.org/licenses/odbl/",children:" Open Data Commons Open Database License (ODbL)"}),"."]})})]})}var M=a(70),H=a.n(M);function P(e){var t=new Date(1e3*e),a=t.getUTCHours(),r=t.getUTCMinutes().toString();r=1===r.length?"0"+r:r;var n=t.getUTCSeconds().toString();return a+":"+r+":"+(n=1===n.length?"0"+n:n)}function E(){return window.innerHeight}var Y=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,r,n,c,o,i,s,u,d,h,f,p,m,j,b,y,O,w,v,g,x,N,S,T,D,C,_,k,M,E,Y,F,U,z,A;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 3:return a=e.sent,r=a.data.coord.lat,n=a.data.coord.lon,c=a.data.dt,o=a.data.dt+a.data.timezone,e.next=10,H.a.get("https://api.openweathermap.org/data/2.5/onecall/timemachine?lat=".concat(r,"&lon=").concat(n,"&dt=").concat(c,"&units=metric&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 10:if(i=e.sent,s=48,u=[],d=new Date(1e3*o),h=d.getUTCHours(),!((f=i.data.hourly.length-1)<h)){e.next=25;break}return p=c-86400,e.next=20,H.a.get("https://api.openweathermap.org/data/2.5/onecall/timemachine?lat=".concat(r,"&lon=").concat(n,"&dt=").concat(p,"&units=metric&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 20:for(m=e.sent,j=h-f,console.assert(j<=m.data.hourly.length),b=m.data.hourly.length-j,y=b;y<m.data.hourly.length;y++)u.push({temperature:Math.round(m.data.hourly[y].temp),wind_deg:m.data.hourly[y].wind_deg,wind_speed:Math.round(3.6*m.data.hourly[y].wind_speed),cloudiness:m.data.hourly[y].clouds,weather:m.data.hourly[y].weather,probabilityOfPrecipitation:0,rain_1h:"rain"in m.data.hourly[y]?m.data.hourly[y].rain["1h"]:0,snow_1h:"snow"in m.data.hourly[y]?m.data.hourly[y].snow["1h"]:0,timeUTC:P(m.data.hourly[y].dt),timeLocal:P(m.data.hourly[y].dt+a.data.timezone),dt:m.data.hourly[y].dt});case 25:for(O=u.length,w=f-(h-O);w<f;w++)u.push({temperature:Math.round(i.data.hourly[w].temp),wind_deg:i.data.hourly[w].wind_deg,wind_speed:Math.round(3.6*i.data.hourly[w].wind_speed),cloudiness:i.data.hourly[w].clouds,weather:i.data.hourly[w].weather,probabilityOfPrecipitation:0,rain_1h:"rain"in i.data.hourly[w]?i.data.hourly[w].rain["1h"]:0,snow_1h:"snow"in i.data.hourly[w]?i.data.hourly[w].snow["1h"]:0,timeUTC:P(i.data.hourly[w].dt),timeLocal:P(i.data.hourly[w].dt+a.data.timezone),dt:i.data.hourly[w].dt});return"current,minutely,alerts",e.next=31,H.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(r,"&lon=").concat(n,"&units=metric&exclude=").concat("current,minutely,alerts","&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 31:for(v=e.sent,g=s-u.length,console.assert(g<=v.data.hourly.length),x=0;x<g;x++)u.push({temperature:Math.round(v.data.hourly[x].temp),wind_deg:v.data.hourly[x].wind_deg,wind_speed:Math.round(3.6*v.data.hourly[x].wind_speed),cloudiness:v.data.hourly[x].clouds,weather:v.data.hourly[x].weather,probabilityOfPrecipitation:"pop"in v.data.hourly[x]?v.data.hourly[x].pop:0,rain_1h:"rain"in v.data.hourly[x]?v.data.hourly[x].rain["1h"]:0,snow_1h:"snow"in v.data.hourly[x]?v.data.hourly[x].snow["1h"]:0,timeUTC:P(v.data.hourly[x].dt),timeLocal:P(v.data.hourly[x].dt+a.data.timezone),dt:v.data.hourly[x].dt});for(N=0,S=23,T=function(e){for(var t=[],a=N;a<=S;a++)t.push(u[a].temperature);for(var r=Math.min.apply(Math,t),n=t.map((function(e){return e-(r-1)})),c=0,o=N;o<=S;o++)u[o].temperatureForPlot=n[c],c++;N+=24,S+=24},D=0;D<2;D++)T();for(C={hourly:u},_=Date.now(),k=_+1e3*a.data.timezone,M=new Date(k),E=M.getUTCHours(),C.currentHour=E,C.hoursOfSunrise=[],C.hoursOfSunset=[],Y=0;Y<2;Y++)F=new Date(1e3*(v.data.daily[Y].sunrise+a.data.timezone)),U=F.getUTCHours(),z=new Date(1e3*(v.data.daily[Y].sunset+a.data.timezone)),A=z.getUTCHours(),C.hoursOfSunrise.push(U),C.hoursOfSunset.push(A);return e.abrupt("return",Promise.resolve(C));case 51:return e.prev=51,e.t0=e.catch(0),console.log("Failed to fetch weather data within getWeatherData"),console.log(e.t0),e.abrupt("return",Promise.reject(Error(e.t0)));case 56:case"end":return e.stop()}}),e,null,[[0,51]])})));return function(t){return e.apply(this,arguments)}}();var F=function(){var e=function(){var e=Object(d.useState)(E()),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(d.useEffect)((function(){function e(){var e=E();e>a&&r(e)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}})),a}(),t=function(e){var t=Math.max(0,e-1),a=Object(d.useState)(0),r=Object(s.a)(a,2),n=r[0],c=r[1],o=Object(d.useRef)([0,0]),i=Object(d.useRef)(!1);return[n,function(e){o.current=[e.targetTouches[0].clientX,e.targetTouches[0].clientY],i.current=!0},function(e){if(i.current){var a=[e.targetTouches[0].clientX,e.targetTouches[0].clientY],r=a[0]-o.current[0],s=a[1]-o.current[1],u=Math.abs(r)<Math.abs(s),l=s>0&&u;s<0&&u&&(c(n<t?n+1:n),i.current=!1),l&&(c(n>0?n-1:n),i.current=!1)}}]}(3),a=Object(s.a)(t,3),r=a[0],n=a[1],c=a[2],o=Object(h.a)(["cityName"]),u=Object(s.a)(o,3),f=u[0],p=u[1],m=u[2],j=Object(d.useState)(f.cityName?f.cityName:""),b=Object(s.a)(j,2),w=b[0],v=b[1],g=Object(d.useState)(),x=Object(s.a)(g,2),N=x[0],S=x[1],T=Object(d.useRef)(!1),D=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T.current=!0,e.next=4,Y(w);case 4:t=e.sent,p("cityName",w,{path:"/",secure:!0,sameSite:"strict",maxAge:31536e3}),S(t),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Failed to fetch weather data"),console.log(e.t0),m("cityName",{path:"/",secure:!0,sameSite:"strict",maxAge:31536e3}),S();case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){f.cityName&&C()}),[]),Object(y.jsx)("div",{className:"App",style:{minHeight:"".concat(e,"px")},children:Object(y.jsxs)("div",{className:"websiteContent",children:[Object(y.jsx)(O,{cityName:w,updateCityName:v,reloadWeather:D}),void 0===N?Object(y.jsx)("div",{className:"noData",children:!1===T.current?Object(y.jsxs)("h1",{children:["Search for a city name.",Object(y.jsx)("br",{}),"Get the weather forecast."]}):Object(y.jsxs)("h1",{children:["Failed to get weather data.",Object(y.jsx)("br",{}),"Try another city."]})}):Object(y.jsxs)("div",{className:"sections",onTouchStart:function(e){return n(e)},onTouchMove:function(e){return c(e)},children:[Object(y.jsx)("div",{className:"container",style:{transform:"translateY(-".concat(100*r,"%)")},children:Object(y.jsx)(_,{dayId:0,weatherData:N.hourly.slice(0,24),currentHour:N.currentHour,hourOfSunrise:N.hoursOfSunrise[0],hourOfSunset:N.hoursOfSunset[0]})}),Object(y.jsx)("div",{className:"container",style:{transform:"translateY(".concat(100*(1-r),"%)")},children:Object(y.jsx)(_,{dayId:1,weatherData:N.hourly.slice(24,48),currentHour:N.currentHour,hourOfSunrise:N.hoursOfSunrise[1],hourOfSunset:N.hoursOfSunset[1]})}),Object(y.jsx)("div",{className:"container",style:{transform:"translateY(".concat(100*(2-r),"%)")},children:Object(y.jsx)(k,{cityName:f.cityName,weatherData:N})})]})]})})};c.a.render(Object(y.jsx)(o.a,{children:Object(y.jsx)(F,{})}),document.getElementById("root"))}},[[345,1,2]]]);
//# sourceMappingURL=main.b1742f08.chunk.js.map