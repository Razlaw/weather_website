(this.webpackJsonpweather_website=this.webpackJsonpweather_website||[]).push([[0],{187:function(e,t,a){},205:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){"use strict";a.r(t);var r,n=a(60),c=a.n(n),o=(a(185),a(351)),i=a(107),s=a(16),l=a(39),u=a.n(l),d=(a(187),a(0)),h=a.n(d),j=a(108),b=a.n(j),m=a(353),p=(a(205),["title","titleId"]);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},f.apply(this,arguments)}function O(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function v(e,t){var a=e.title,n=e.titleId,c=O(e,p);return d.createElement("svg",f({id:"SVGRoot",width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},c),a?d.createElement("title",{id:n},a):null,r||(r=d.createElement("g",{stroke:"#000"},d.createElement("ellipse",{cx:5.6727,cy:5.7476,rx:3.0967,ry:3.1013,fill:"none",strokeLinecap:"square",strokeLinejoin:"round",strokeWidth:1.7101}),d.createElement("path",{d:"m9.2387 9.2405 3.7161 3.7215",fill:"none",strokeWidth:1.6549}),d.createElement("path",{d:"m9.2387 10.481-1.2387-2.481 2.4774 1.2405z",strokeLinejoin:"round",strokeWidth:.46851}))))}var y=d.forwardRef(v),x=(a.p,a(3));function g(e){var t=e.cityName,a=e.updateCityName,r=e.reloadWeather;return Object(x.jsx)("div",{className:"citySearchBar",children:Object(x.jsx)("form",{onSubmit:r,children:Object(x.jsxs)("div",{className:"formComponents",children:[Object(x.jsx)("input",{onChange:function(e){return a(e.target.value)},placeholder:""===t?"City":t,type:"text",id:"cityNameInput",autoFocus:!0}),Object(x.jsx)("button",{type:"submit",children:Object(x.jsx)(y,{className:"magnifyingGlassIcon"})})]})})})}var w=a(174);a(207),a(208);function N(e){var t=e.time,a=e.active;return Object(x.jsxs)("li",{className:a?"hourOfDayListItem active":"hourOfDayListItem",children:[t,":00"]})}a(209);var D=a(347),k=a(354),C=a(172),S=a(175),T=a(169),F=a(171);function M(e){var t=e.currentHour,a=e.weatherData,r=e.unit;return Object(x.jsx)(D.a,{width:"100%",height:"100%",children:Object(x.jsxs)(k.a,{layout:"vertical",width:"100%",height:"100%",data:a,margin:{top:20,left:20,right:20,bottom:0},children:[Object(x.jsx)(C.a,{type:"number",hide:!0,domain:[0,"dataMax + 1"]}),Object(x.jsxs)(S.a,{dataKey:"tempForPlot",barSize:18,background:{fill:"rgb(255,255,255)"},animationDuration:500,children:[Object(x.jsx)(T.a,{dataKey:"temp",position:"right",formatter:function(e){return e.toFixed(0)+r}}),a.map((function(e,a){return Object(x.jsx)(F.a,{className:a===t?"barCell active":"barCell",fill:a===t?"#82ca9d":"rgb(136,132,216)",height:18,stroke:"#000",strokeWidth:0,radius:[0,5,5,0]},"cell-".concat(a))}))]})]})})}function E(e){var t=e.dayToDisplay,a=e.weatherData,r=(new Date).getHours(),n=Object(d.useState)(0),c=Object(s.a)(n,2),o=c[0],i=c[1],l=Object(d.useState)([{temp:0,tempForPlot:1}]),u=Object(s.a)(l,2),j=u[0],b=u[1],m=h.a.useState([0,0]),p=Object(s.a)(m,2),f=p[0],O=p[1],v=h.a.useState([0,0]),y=Object(s.a)(v,2),g=y[0],D=y[1];function k(){var e=f[0]-g[0],t=f[1]-g[1],a=Math.abs(e)>Math.abs(t),r=e<-50&&a;e>50&&a&&i(o<2?o+1:0),r&&i(o>0?o-1:2)}return Object(d.useEffect)((function(){for(var e=new Array(0),t=0;t<a.length;t++){var r=Math.round(a[t].temp);e.push(r)}for(var n=Math.min.apply(Math,e),c=e.map((function(e){return e-(n-1)})),o=new Array(0),i=0;i<a.length;i++)o[i]={temp:e[i],tempForPlot:c[i]};b(o)}),[a]),Object(x.jsx)("div",{className:"weatherForecastForADay",onTouchStart:function(e){return(t=e).preventDefault(),O([t.targetTouches[0].clientX,t.targetTouches[0].clientY]),void D([t.targetTouches[0].clientX,t.targetTouches[0].clientY]);var t},onTouchMove:function(e){var t;D([(t=e).targetTouches[0].clientX,t.targetTouches[0].clientY])},onTouchEnd:function(){return k()},onMouseDown:function(e){return(t=e).preventDefault(),O([t.clientX,t.clientY]),void D([t.clientX,t.clientY]);var t},onMouseMove:function(e){return t=e,console.log("moving mouse or dragging?"),void D([t.clientX,t.clientY]);var t},onMouseUp:function(){return k()},children:Object(x.jsxs)("div",{className:"contentContainer",children:[Object(x.jsx)("div",{className:"dayDisplay",children:Object(x.jsx)("h1",{children:t})}),Object(x.jsxs)("div",{className:"forecast",children:[Object(x.jsx)("div",{className:"hoursOfDay",children:Object(x.jsx)("ul",{children:Object(w.a)(Array(24)).map((function(e,t){return Object(x.jsx)(N,{time:t,active:r===t},t)}))})}),Object(x.jsx)("div",{className:"forecastPlot",children:Object(x.jsxs)("div",{className:"plotContainer",children:[Object(x.jsx)("div",{className:"tempPlot",style:{transform:"rotateY(".concat(.25*o,"turn)")},children:Object(x.jsx)(M,{currentHour:r,weatherData:j,unit:"\xb0C"})}),Object(x.jsx)("div",{className:"windPlot",style:{transform:"rotateY(".concat(.25*(o-2),"turn)")},children:Object(x.jsx)(M,{currentHour:r,weatherData:j,unit:"m/s"})}),Object(x.jsx)("div",{className:"rainPlot",style:{transform:"rotateY(".concat(.25*(o-1),"turn)")},children:Object(x.jsx)(M,{currentHour:r,weatherData:j,unit:"mm"})})]})})]})]})})}a(344);function P(e){e.cityName,e.weatherData;return Object(x.jsxs)("div",{className:"weatherForecastForAWeek",children:[Object(x.jsx)("div",{className:"contentContainer",children:Object(x.jsx)("h1",{children:"Forecast for a week"})}),Object(x.jsx)("div",{className:"footer",children:Object(x.jsxs)("span",{children:["The weather data displayed on this website is provided by",Object(x.jsx)("a",{href:"https://openweathermap.org",children:" OpenWeather (TM)"})," under the",Object(x.jsx)("a",{href:"https://creativecommons.org/licenses/by-sa/4.0/",children:" Creative Commons Attribution-ShareAlike 4.0 International licence (CC BY-SA 4.0)"}),". Data and database are open and licensed by ",Object(x.jsx)("a",{href:"https://opendatacommons.org/licenses/odbl/",children:" Open Data Commons Open Database License (ODbL)"}),"."]})})]})}var Y=function(){var e=Object(m.a)(["cityName"]),t=Object(s.a)(e,3),a=t[0],r=t[1],n=t[2],c=Object(d.useState)(a.cityName?a.cityName:""),o=Object(s.a)(c,2),l=o[0],h=o[1],j=Object(d.useState)(),p=Object(s.a)(j,2),f=p[0],O=p[1],v=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(l,"&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 3:return t=e.sent,a=t.data.coord.lat,c=t.data.coord.lon,console.log("currentWeather"),console.log(t),t.data.dt,t.data.dt+t.data.timezone,"current,minutely,alerts",e.next=13,b.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(a,"&lon=").concat(c,"&units=metric&exclude=").concat("current,minutely,alerts","&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 13:o=e.sent,console.log("nextDaysForecast"),console.log(o),r("cityName",l,{path:"/",secure:!0,sameSite:"strict"}),O(o.data),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("Failed to fetch weather data"),console.log(e.t0.response.data.error),n("cityName",{path:"/",secure:!0,sameSite:"strict"}),O();case 26:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){a.cityName&&y()}),[]),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("div",{className:"websiteContent",children:[Object(x.jsx)(g,{cityName:l,updateCityName:h,reloadWeather:v}),void 0===f?Object(x.jsxs)("div",{className:"noData",children:[Object(x.jsx)("h1",{children:"No weather data to display."}),Object(x.jsx)("h1",{children:"Try another city."})]}):Object(x.jsxs)("div",{className:"sections",children:[Object(x.jsx)(E,{dayToDisplay:"Today",weatherData:f.hourly.slice(0,24)}),Object(x.jsx)(E,{dayToDisplay:"Tomorrow",weatherData:f.hourly.slice(24,48)}),Object(x.jsx)(P,{cityName:a.cityName,weatherData:f})]})]})})};c.a.render(Object(x.jsx)(o.a,{children:Object(x.jsx)(Y,{})}),document.getElementById("root"))}},[[345,1,2]]]);
//# sourceMappingURL=main.145d14e1.chunk.js.map