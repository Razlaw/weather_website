(this.webpackJsonpweather_website=this.webpackJsonpweather_website||[]).push([[0],{187:function(e,t,r){},206:function(e,t,r){},208:function(e,t,r){},209:function(e,t,r){},210:function(e,t,r){},345:function(e,t,r){},346:function(e,t,r){"use strict";r.r(t);var n,a=r(60),c=r.n(a),o=(r(185),r(352)),s=r(107),i=r(16),l=r(39),u=r.n(l),h=(r(187),r(0)),d=r(108),j=r.n(d),b=r(354),m=(r(205),r(206),["title","titleId"]);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function O(e,t){var r=e.title,a=e.titleId,c=p(e,m);return h.createElement("svg",f({id:"SVGRoot",width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),r?h.createElement("title",{id:a},r):null,n||(n=h.createElement("g",{stroke:"#000"},h.createElement("ellipse",{cx:5.6727,cy:5.7476,rx:3.0967,ry:3.1013,fill:"none",strokeLinecap:"square",strokeLinejoin:"round",strokeWidth:1.7101}),h.createElement("path",{d:"m9.2387 9.2405 3.7161 3.7215",fill:"none",strokeWidth:1.6549}),h.createElement("path",{d:"m9.2387 10.481-1.2387-2.481 2.4774 1.2405z",strokeLinejoin:"round",strokeWidth:.46851}))))}var v=h.forwardRef(O),y=(r.p,r(2));function x(e){var t=e.cityName,r=e.updateCityName,n=e.reloadWeather;return Object(y.jsx)("div",{className:"citySearchBar",children:Object(y.jsx)("form",{onSubmit:n,children:Object(y.jsxs)("div",{className:"formComponents",children:[Object(y.jsx)("input",{onChange:function(e){return r(e.target.value)},placeholder:""===t?"City":t,type:"text",id:"cityNameInput",autoFocus:!0}),Object(y.jsx)("button",{type:"submit",children:Object(y.jsx)(v,{className:"magnifyingGlassIcon"})})]})})})}var g=r(174);r(208),r(209);function w(e){var t=e.time,r=e.active;return Object(y.jsxs)("li",{className:r?"hourOfDayListItem active":"hourOfDayListItem",children:[t,":00"]})}r(210);var N=r(348),D=r(355),T=r(172),S=r(175),k=r(169),C=r(171);function Y(e){var t=e.currentHour,r=e.weatherData,n=e.unit;return Object(y.jsx)(N.a,{width:"100%",height:"100%",children:Object(y.jsxs)(D.a,{layout:"vertical",width:"100%",height:"100%",data:r,margin:{top:20,left:20,right:20,bottom:0},children:[Object(y.jsx)(T.a,{type:"number",hide:!0,domain:[0,"dataMax + 1"]}),Object(y.jsxs)(S.a,{dataKey:"tempForPlot",barSize:18,background:{fill:"rgb(255,255,255)"},animationDuration:500,children:[Object(y.jsx)(k.a,{dataKey:"temp",position:"right",formatter:function(e){return e.toFixed(0)+n}}),r.map((function(e,r){return Object(y.jsx)(C.a,{className:r===t?"barCell active":"barCell",fill:r===t?"#82ca9d":"rgb(136,132,216)",height:18,stroke:"#000",strokeWidth:0,radius:[0,5,5,0]},"cell-".concat(r))}))]})]})})}function M(e){var t=e.dayToDisplay,r=e.weatherData,n=(new Date).getHours(),a=Object(h.useState)(0),c=Object(i.a)(a,2),o=c[0],s=c[1],l=Object(h.useState)([{temp:0,tempForPlot:1}]),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(h.useRef)([0,0]),m=Object(h.useRef)([0,0]);function f(){var e=b.current[0]-m.current[0],t=b.current[1]-m.current[1],r=Math.abs(e)>Math.abs(t),n=e<-50&&r;e>50&&r&&s(o<2?o+1:0),n&&s(o>0?o-1:2)}return Object(h.useEffect)((function(){for(var e=new Array(0),t=0;t<r.length;t++){var n=Math.round(r[t].temp);e.push(n)}for(var a=Math.min.apply(Math,e),c=e.map((function(e){return e-(a-1)})),o=new Array(0),s=0;s<r.length;s++)o[s]={temp:e[s],tempForPlot:c[s]};j(o)}),[r]),Object(y.jsx)("div",{className:"weatherForecastForADay",onTouchStart:function(e){return t=e,b.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY],void(m.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY]);var t},onTouchMove:function(e){return t=e,void(m.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY]);var t},onTouchEnd:function(){return f()},onMouseDown:function(e){return(t=e).preventDefault(),b.current=[t.clientX,t.clientY],void(m.current=[t.clientX,t.clientY]);var t},onMouseMove:function(e){return t=e,void(m.current=[t.clientX,t.clientY]);var t},onMouseUp:function(){return f()},children:Object(y.jsxs)("div",{className:"contentContainer",children:[Object(y.jsx)("div",{className:"dayDisplay",children:Object(y.jsx)("h1",{children:t})}),Object(y.jsxs)("div",{className:"forecast",children:[Object(y.jsx)("div",{className:"hoursOfDay",children:Object(y.jsx)("ul",{children:Object(g.a)(Array(24)).map((function(e,t){return Object(y.jsx)(w,{time:t,active:n===t},t)}))})}),Object(y.jsx)("div",{className:"forecastPlot",children:Object(y.jsxs)("div",{className:"plotContainer",children:[Object(y.jsx)("div",{className:"tempPlot",style:{transform:"rotateY(".concat(.25*o,"turn)")},children:Object(y.jsx)(Y,{currentHour:n,weatherData:d,unit:"\xb0C"})}),Object(y.jsx)("div",{className:"windPlot",style:{transform:"rotateY(".concat(.25*(o-2),"turn)")},children:Object(y.jsx)(Y,{currentHour:n,weatherData:d,unit:"m/s"})}),Object(y.jsx)("div",{className:"rainPlot",style:{transform:"rotateY(".concat(.25*(o-1),"turn)")},children:Object(y.jsx)(Y,{currentHour:n,weatherData:d,unit:"mm"})})]})})]})]})})}r(345);function A(e){e.cityName,e.weatherData;return Object(y.jsxs)("div",{className:"weatherForecastForAWeek",children:[Object(y.jsx)("div",{className:"contentContainer",children:Object(y.jsx)("h1",{children:"Forecast for a week"})}),Object(y.jsx)("div",{className:"footer",children:Object(y.jsxs)("span",{children:["The weather data displayed on this website is provided by",Object(y.jsx)("a",{href:"https://openweathermap.org",children:" OpenWeather (TM)"})," under the",Object(y.jsx)("a",{href:"https://creativecommons.org/licenses/by-sa/4.0/",children:" Creative Commons Attribution-ShareAlike 4.0 International licence (CC BY-SA 4.0)"}),". Data and database are open and licensed by ",Object(y.jsx)("a",{href:"https://opendatacommons.org/licenses/odbl/",children:" Open Data Commons Open Database License (ODbL)"}),"."]})})]})}var E=function(){var e=Object(h.useState)(0),t=Object(i.a)(e,2),r=t[0],n=t[1],a=Object(h.useRef)([0,0]),c=Object(h.useRef)([0,0]),o=Object(h.useRef)(!1),l=Object(b.a)(["cityName"]),d=Object(i.a)(l,3),m=d[0],f=d[1],p=d[2],O=Object(h.useState)(m.cityName?m.cityName:""),v=Object(i.a)(O,2),g=v[0],w=v[1],N=Object(h.useState)(),D=Object(i.a)(N,2),T=D[0],S=D[1],k=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(u.a.mark((function e(){var t,r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(g,"&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 3:return t=e.sent,r=t.data.coord.lat,n=t.data.coord.lon,console.log("currentWeather"),console.log(t),t.data.dt,t.data.dt+t.data.timezone,"current,minutely,alerts",e.next=13,j.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(r,"&lon=").concat(n,"&units=metric&exclude=").concat("current,minutely,alerts","&appid=").concat("78515fbbdec3c5a2fda4e761f9f01216"));case 13:a=e.sent,console.log("nextDaysForecast"),console.log(a),f("cityName",g,{path:"/",secure:!0,sameSite:"strict",maxAge:31536e3}),S(a.data),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("Failed to fetch weather data"),console.log(e.t0.response.data.error),p("cityName",{path:"/",secure:!0,sameSite:"strict",maxAge:31536e3}),S();case 26:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return Object(h.useEffect)((function(){m.cityName&&C()}),[]),Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("div",{className:"websiteContent",children:[Object(y.jsx)(x,{cityName:g,updateCityName:w,reloadWeather:k}),void 0===T?Object(y.jsxs)("div",{className:"noData",children:[Object(y.jsx)("h1",{children:"No weather data to display."}),Object(y.jsx)("h1",{children:"Try another city."})]}):Object(y.jsxs)("div",{className:"sections",onTouchStart:function(e){return t=e,a.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY],c.current=[t.targetTouches[0].clientX,t.targetTouches[0].clientY],o.current=!0,console.log("touchStart.current",a.current),console.log("touchCurrent.current",c.current),void console.log("isAwaitingScroll.current",o.current);var t},onTouchMove:function(e){return function(e){c.current=[e.targetTouches[0].clientX,e.targetTouches[0].clientY];var t=c.current[0]-a.current[0],s=c.current[1]-a.current[1],i=Math.abs(t)<Math.abs(s),l=s>50&&i,u=s<-50&&i;console.log("touchStart.current",a.current),console.log("touchCurrent.current",c.current),console.log("swipeDown ",l),console.log("swipeUp ",u),u&&o.current&&(n(r<2?r+1:r),o.current=!1),l&&o.current&&(n(r>0?r-1:r),o.current=!1)}(e)},onTouchEnd:function(){o.current=!1},children:[Object(y.jsx)("div",{className:"container",style:{transform:"translateY(-".concat(100*r,"%)")},children:Object(y.jsx)(M,{dayToDisplay:"Today",weatherData:T.hourly.slice(0,24)})}),Object(y.jsx)("div",{className:"container",style:{transform:"translateY(".concat(100*(1-r),"%)")},children:Object(y.jsx)(M,{dayToDisplay:"Tomorrow",weatherData:T.hourly.slice(24,48)})}),Object(y.jsx)("div",{className:"container",style:{transform:"translateY(".concat(100*(2-r),"%)")},children:Object(y.jsx)(A,{cityName:m.cityName,weatherData:T})})]})]})})};c.a.render(Object(y.jsx)(o.a,{children:Object(y.jsx)(E,{})}),document.getElementById("root"))}},[[346,1,2]]]);
//# sourceMappingURL=main.87d8c890.chunk.js.map